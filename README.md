# RUnit
Example testing framework in C#

The `RUnit.Library` project contains all of the types required to impliment unit testing.
There are four custom attributes prefixed with `RUnit` which can be used to impliment test suites, these are
 - `RUnitSuiteAttribute` which defines a test suite and should decorate a class
 - `RUnitTestAttribute` which defines a test method and should decorate an instance method
 - `RUnitSetupAttribute` which defines a setup fixture and should decorate one or more setup methods
 - `RUnitTeardownAttribute` which defines a teardown fixture and should decorate one or more teardown methods

One commonly required feature of any testing framework is to provide mock objects which allow dependent behaviour to be tested  within a controlled environment.
The `RMock<T>` type provides this functionality.
It is assumed that a dependant type is going to require an object which impliments a given interface and as such the `T` provided when creating an `RMock` object must be an interface.

Calling `RMock<T>.Builder()` returns an `RMockBuilder` object which then allows the user to provide canned responses to each method defined on type `T`.
This is done using the `DefineReturn(string methodName, object response)` method on the `RMockBuilder` object.
Once all method responses have been defined an `RMock<T>` object can be generated by calling `Compile()` on the `RMockBuilder` object.

For example given 

```
 class Dependant { 
     private readonly IService service;
     public Dependant(IService service) {
         this.service = service;
     }
 }
 interface IService {
     string GetMessage();
 }
```

 We can create an instance of Dependant and mock IService like this

 ```
    RMock<IService> mock = RMock<IService>.Builder()
                                        .DefineReturn("GetMessage", "Hello World!")
                                        .Compile();

    Dependant dependant = new Dependant(mock.Instance);
```
An `RMock<T>` object holds a reference to the generated mock type instance which is a newly defined type generated using the `System.Reflection.Emit` types, including custom emitted intermediate language.